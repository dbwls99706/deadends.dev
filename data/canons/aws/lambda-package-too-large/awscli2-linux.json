{
  "schema_version": "1.0.0",
  "id": "aws/lambda-package-too-large/awscli2-linux",
  "url": "https://deadends.dev/aws/lambda-package-too-large/awscli2-linux",
  "error": {
    "signature": "An error occurred (InvalidParameterValueException): Unzipped size must be smaller than 262144000 bytes",
    "regex": "InvalidParameterValueException.*Unzipped size must be smaller|RequestEntityTooLargeException.*Request must be smaller than",
    "domain": "aws",
    "category": "deployment_error",
    "first_seen": "2019-01-01",
    "last_confirmed": "2026-02-14"
  },
  "environment": {
    "runtime": {
      "name": "awscli",
      "version_range": ">=2.0,<3.0"
    },
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.88,
    "confidence": 0.9,
    "last_updated": "2026-02-14",
    "summary": "Lambda deployment package exceeds the 250MB unzipped limit (or 50MB zipped for direct upload). Common when bundling large dependencies like NumPy, pandas, PyTorch, or native compiled libraries."
  },
  "dead_ends": [
    {
      "action": "Compressing the zip file more aggressively",
      "why_fails": "AWS checks the unzipped size, not the zipped size. Better compression reduces upload time but doesn't affect the unzipped limit.",
      "fail_rate": 0.9,
      "sources": [
        "https://docs.aws.amazon.com/lambda/latest/dg/gettingstarted-limits.html"
      ],
      "condition": ""
    },
    {
      "action": "Splitting code into multiple Lambda functions",
      "why_fails": "If the large dependencies are shared across all functions, each function still needs the same large package. Splitting code doesn't reduce dependency size.",
      "fail_rate": 0.7,
      "sources": [],
      "condition": "Large shared dependencies"
    }
  ],
  "workarounds": [
    {
      "action": "Use Lambda Layers to separate large dependencies",
      "how": "# Create a layer with large dependencies:\nmkdir -p python/lib/python3.11/site-packages\npip install pandas numpy -t python/lib/python3.11/site-packages/\nzip -r layer.zip python/\naws lambda publish-layer-version --layer-name my-deps --zip-file fileb://layer.zip\n# Attach layer to function (up to 5 layers, 250MB total unzipped)",
      "success_rate": 0.85,
      "sources": [
        "https://docs.aws.amazon.com/lambda/latest/dg/chapter-layers.html"
      ],
      "condition": ""
    },
    {
      "action": "Use container image packaging instead of zip (up to 10GB)",
      "how": "# Dockerfile:\nFROM public.ecr.aws/lambda/python:3.11\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY app.py .\nCMD [\"app.handler\"]\n# Build and push to ECR, then create Lambda from image",
      "success_rate": 0.92,
      "sources": [
        "https://docs.aws.amazon.com/lambda/latest/dg/images-create.html"
      ],
      "condition": ""
    },
    {
      "action": "Strip unnecessary files from dependencies to reduce size",
      "how": "# Remove tests, docs, __pycache__, .dist-info:\nfind python/ -type d -name '__pycache__' -exec rm -rf {} +\nfind python/ -type d -name 'tests' -exec rm -rf {} +\nfind python/ -name '*.pyc' -delete\n# For numpy/scipy: strip debug symbols from .so files:\nfind python/ -name '*.so' -exec strip {} +",
      "success_rate": 0.78,
      "sources": [],
      "condition": "Close to the limit"
    }
  ],
  "transition_graph": {
    "leads_to": [],
    "preceded_by": [],
    "frequently_confused_with": [
      {
        "error_id": "aws/lambda-runtime-error/aws-cli2-linux",
        "distinction": "Package too large is a deployment-time error. Runtime import error occurs after successful deployment when a module is missing from the package."
      }
    ]
  },
  "metadata": {
    "generated_by": "expert_review",
    "generation_date": "2026-02-14",
    "review_status": "auto_generated",
    "evidence_count": 100,
    "last_verification": "2026-02-14"
  }
}
