{
  "schema_version": "1.0.0",
  "id": "cicd/gha-deploy-key-permission/gha-ubuntu",
  "url": "https://deadends.dev/cicd/gha-deploy-key-permission/gha-ubuntu",
  "error": {
    "signature": "ERROR: Permission to org/repo.git denied to deploy key",
    "regex": "(?:Permission to [\\w.-]+/[\\w.-]+\\.git denied to deploy key|deploy key.*permission denied|ERROR: Permission to .+\\.git denied to deploy key)",
    "domain": "cicd",
    "category": "authentication",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-13"
  },
  "environment": {
    "runtime": {"name": "github-actions", "version_range": ">=2.0"},
    "os": "ubuntu-latest"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.91,
    "confidence": 0.90,
    "last_updated": "2026-02-13",
    "summary": "Deploy key lacks write permission or is being used to access a second repository. GitHub deploy keys are read-only by default and each key can only be attached to a single repository, so push operations or cross-repo access will fail."
  },
  "dead_ends": [
    {
      "action": "Add the same deploy key to a second repository for cross-repo access",
      "why_fails": "GitHub enforces that each SSH deploy key can only be registered to one repository. Attempting to add the same public key to another repo produces 'Key is already in use' error.",
      "fail_rate": 0.99,
      "sources": [],
      "condition": ""
    },
    {
      "action": "Re-generate the deploy key without enabling write access",
      "why_fails": "Regenerating the key pair does not help if 'Allow write access' is not checked when adding the new public key to the repository deploy key settings. The default is read-only.",
      "fail_rate": 0.85,
      "sources": [],
      "condition": ""
    },
    {
      "action": "Use ssh-agent with the deploy key and assume git push will work",
      "why_fails": "Loading the key into ssh-agent does not override GitHub's server-side read-only restriction. The push is rejected by the remote regardless of local SSH configuration.",
      "fail_rate": 0.95,
      "sources": [],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Re-add the deploy key with 'Allow write access' enabled in repository settings",
      "success_rate": 0.94,
      "how": "Go to the repository Settings > Deploy keys, remove the existing read-only key, then add it again with the 'Allow write access' checkbox checked. This grants push permission for that single repository.",
      "sources": [],
      "condition": ""
    },
    {
      "action": "Use a GitHub App installation token instead of a deploy key for cross-repo access",
      "success_rate": 0.92,
      "how": "Create a GitHub App with the necessary repository permissions, install it on the required repos, and use actions like tibdex/github-app-token or peter-murray/workflow-application-token-action to generate an installation token at runtime. Use this token for git operations.",
      "sources": [],
      "condition": "When you need access to multiple repositories from a single workflow"
    },
    {
      "action": "Use webfactory/ssh-agent action with unique deploy keys per repository and SSH config aliases",
      "success_rate": 0.88,
      "how": "Generate a unique SSH key pair for each repository. Store each private key as a separate secret. Use webfactory/ssh-agent@v0.9.0 to load all keys, then configure ~/.ssh/config with Host aliases so git knows which key to use for each repo URL.",
      "sources": [],
      "condition": "When multiple repos must be accessed and a GitHub App is not an option"
    }
  ],
  "transition_graph": {
    "leads_to": [
      {"error_id": "cicd/gha-checkout-failed/gha-linux", "probability": 0.25, "condition": "When the deploy key also fails during actions/checkout for private submodules or secondary repos"}
    ],
    "preceded_by": [
      {"error_id": "cicd/gha-secret-not-found/gha-linux", "probability": 0.20, "condition": "When the deploy key secret was not configured or has an incorrect name"}
    ],
    "frequently_confused_with": [
      {"error_id": "cicd/gha-permission-denied/gha-linux", "distinction": "Deploy key permission denied is about SSH key restrictions on git operations; GHA permission denied is about GITHUB_TOKEN API scope for GitHub REST/GraphQL endpoints"},
      {"error_id": "cicd/gha-docker-login-failed/gha-linux", "distinction": "Deploy key errors are about git SSH authentication; Docker login failures are about container registry credentials"}
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-13",
    "review_status": "auto_generated",
    "evidence_count": 80,
    "last_verification": "2026-02-13"
  }
}
