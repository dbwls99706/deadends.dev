{
  "schema_version": "1.0.0",
  "id": "cuda/external-semaphore-failed/cuda12-linux",
  "url": "https://deadends.dev/cuda/external-semaphore-failed/cuda12-linux",
  "error": {
    "signature": "CUDA error: an error occurred in the external semaphore (cudaErrorExternalDevice)",
    "regex": "cudaErrorExternalDevice|external semaphore.*failed|external.*semaphore.*error|cudaImportExternalSemaphore.*failed",
    "domain": "cuda",
    "category": "interop_error",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {
      "name": "cuda",
      "version_range": ">=12.0,<13.0"
    },
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.78,
    "confidence": 0.82,
    "last_updated": "2026-02-12",
    "summary": "A CUDA external semaphore operation failed. External semaphores enable synchronization between CUDA and other APIs (Vulkan, OpenGL, Direct3D). The error typically occurs when importing a semaphore handle from another API fails due to incompatible handle types, unsupported semaphore types, or driver version mismatches between the CUDA and graphics drivers."
  },
  "dead_ends": [
    {
      "action": "Using CUDA events instead of external semaphores for cross-API synchronization",
      "why_fails": "CUDA events are internal to the CUDA runtime and cannot synchronize with Vulkan, OpenGL, or other graphics APIs. Cross-API synchronization requires external semaphores or external memory. CUDA events only work between CUDA streams.",
      "fail_rate": 0.95,
      "sources": [
        "https://docs.nvidia.com/cuda/cuda-runtime-api/"
      ],
      "condition": ""
    },
    {
      "action": "Falling back to CPU-side synchronization (glFinish/vkQueueWaitIdle) between CUDA and graphics operations",
      "why_fails": "CPU-side synchronization forces a full pipeline flush on both the CUDA and graphics sides, destroying all parallelism. It introduces massive latency (potentially milliseconds per sync) and defeats the purpose of GPU interop.",
      "fail_rate": 0.7,
      "sources": [
        "https://docs.nvidia.com/cuda/cuda-runtime-api/"
      ],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Verify the external semaphore handle type matches between CUDA and the other API",
      "success_rate": 0.85,
      "how": "For Vulkan interop on Linux, use VK_EXTERNAL_SEMAPHORE_HANDLE_TYPE_OPAQUE_FD_BIT and cudaExternalSemaphoreHandleTypeOpaqueFd. Check that the Vulkan physical device supports the handle type with vkGetPhysicalDeviceExternalSemaphoreProperties. On Linux, opaque FD handles are most reliable. Ensure the same GPU is used for both CUDA and Vulkan.",
      "sources": [],
      "condition": ""
    },
    {
      "action": "Update NVIDIA drivers to ensure both CUDA and the graphics API use compatible driver versions",
      "success_rate": 0.8,
      "how": "External semaphore support requires driver-level interop. Install the latest NVIDIA driver that supports both your CUDA version and graphics API version. On Linux: use the same driver package for both CUDA and Vulkan/OpenGL. Check compatibility with nvidia-smi and vulkaninfo. Minimum driver version for CUDA 12 external semaphores is 525.x.",
      "sources": [],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "cuda/illegal-memory-access/cuda12-linux",
        "probability": 0.15,
        "condition": "when semaphore synchronization failure causes CUDA to access memory being modified by another API"
      }
    ],
    "preceded_by": [],
    "frequently_confused_with": [
      {
        "error_id": "cuda/shared-object-init-failed/cuda12-linux",
        "distinction": "External-semaphore-failed is about cross-API GPU synchronization primitives. Shared-object-init-failed is about loading CUDA shared libraries (.so files). Both involve 'external' resources but at completely different levels."
      }
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 30,
    "last_verification": "2026-02-12"
  }
}
