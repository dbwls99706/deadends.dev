{
  "schema_version": "1.0.0",
  "id": "database/mysql-too-many-connections/mysql8-linux",
  "url": "https://deadends.dev/database/mysql-too-many-connections/mysql8-linux",
  "error": {
    "signature": "ERROR 1040 (HY000): Too many connections",
    "regex": "ERROR 1040.*Too many connections",
    "domain": "database",
    "category": "resource_error",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {
      "name": "mysql",
      "version_range": ">=8.0,<9.0"
    },
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.9,
    "confidence": 0.92,
    "last_updated": "2026-02-12",
    "summary": "All MySQL connection slots (max_connections, default 151) are in use. No new connections can be established including admin connections. Caused by connection leaks, missing connection pooling, or sudden traffic spikes."
  },
  "dead_ends": [
    {
      "action": "Setting max_connections extremely high (e.g., 10000) without corresponding OS and hardware tuning",
      "why_fails": "Each MySQL connection uses a thread with its own memory allocation. High max_connections without increasing open_files_limit, thread stack, and available RAM leads to OOM or 'Can't create a new thread' errors.",
      "fail_rate": 0.8,
      "sources": [
        "https://www.postgresql.org/docs/current/libpq-connect.html"
      ],
      "condition": ""
    },
    {
      "action": "Rapidly restarting MySQL to reset connections",
      "why_fails": "Restarting kills all connections and in-flight transactions abruptly. Without fixing the root cause, connections exhaust again within minutes. Repeated restarts cause data corruption risk with InnoDB recovery.",
      "fail_rate": 0.85,
      "sources": [
        "https://www.postgresql.org/docs/current/tutorial-transactions.html"
      ],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Use a connection pooler like ProxySQL or MySQL Router",
      "success_rate": 0.92,
      "how": "Install ProxySQL and configure backend MySQL servers. Set mysql-max_connections in ProxySQL to limit backend connections while accepting more frontend connections. Applications connect to ProxySQL port instead of MySQL directly.",
      "sources": [],
      "condition": ""
    },
    {
      "action": "Identify and close idle connections, fix connection leaks",
      "success_rate": 0.88,
      "how": "Connect as root (MySQL reserves one extra connection for SUPER users): mysql -u root -p. Run: SHOW PROCESSLIST; to see all connections. Kill idle ones: KILL <id>; Set wait_timeout and interactive_timeout to reasonable values (e.g., 300 seconds) to auto-close idle connections. Fix application code to properly close connections.",
      "sources": [],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "database/mysql-lock-wait-timeout/mysql8-linux",
        "probability": 0.2,
        "condition": "when high connection count causes more concurrent transactions competing for locks"
      }
    ],
    "preceded_by": [
      {
        "error_id": "database/mysql-lock-wait-timeout/mysql8-linux",
        "probability": 0.25,
        "condition": "when lock contention causes transactions to pile up holding connections"
      }
    ],
    "frequently_confused_with": [
      {
        "error_id": "database/too-many-connections/pg16-linux",
        "distinction": "MySQL ERROR 1040 and PostgreSQL 'too many connections' are the same concept in different databases. MySQL default is 151, PostgreSQL default is 100. MySQL reserves one connection for SUPER users, PostgreSQL has superuser_reserved_connections (default 3)."
      }
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 70,
    "last_verification": "2026-02-12"
  }
}
