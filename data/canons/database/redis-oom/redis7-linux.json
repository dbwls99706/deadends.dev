{
  "schema_version": "1.0.0",
  "id": "database/redis-oom/redis7-linux",
  "url": "https://deadends.dev/database/redis-oom/redis7-linux",
  "error": {
    "signature": "redis.exceptions.ResponseError: OOM command not allowed when used memory > 'maxmemory'.",
    "regex": "OOM command not allowed when used memory.*maxmemory",
    "domain": "database",
    "category": "resource_error",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {
      "name": "redis",
      "version_range": ">=7.0,<8.0"
    },
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.9,
    "confidence": 0.92,
    "last_updated": "2026-02-12",
    "summary": "Redis has reached its maxmemory limit and the configured eviction policy does not allow freeing memory for the current command. Write commands are rejected. Caused by storing too much data without an eviction policy, memory leaks from accumulating keys, or maxmemory set too low."
  },
  "dead_ends": [
    {
      "action": "Setting maxmemory to 0 (unlimited) on a server with limited RAM",
      "why_fails": "Without a maxmemory limit, Redis will consume all available system memory until the Linux OOM killer terminates the process. This causes data loss and affects other processes on the same server.",
      "fail_rate": 0.85,
      "sources": [
        "https://redis.io/docs/"
      ],
      "condition": ""
    },
    {
      "action": "Restarting Redis without persistence to clear memory",
      "why_fails": "If Redis is configured without AOF or RDB persistence, restarting loses all data. Even with persistence, the same data will be reloaded and memory will fill up again immediately after restart.",
      "fail_rate": 0.8,
      "sources": [
        "https://redis.io/docs/"
      ],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Configure an appropriate maxmemory-policy eviction strategy",
      "success_rate": 0.92,
      "how": "Set an eviction policy: redis-cli CONFIG SET maxmemory-policy allkeys-lru (for cache use cases) or volatile-lru (to only evict keys with TTL). Make persistent in redis.conf. Choose the policy based on your use case: allkeys-lru for caches, volatile-ttl for session stores.",
      "sources": [],
      "condition": ""
    },
    {
      "action": "Identify and remove large or unnecessary keys to free memory",
      "success_rate": 0.88,
      "how": "Run: redis-cli --bigkeys to find the largest keys. Use redis-cli MEMORY USAGE <key> to check specific keys. Delete unnecessary keys with DEL or UNLINK (async). Set TTL on keys that should expire: EXPIRE key seconds. Monitor memory: redis-cli INFO memory.",
      "sources": [],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "database/redis-connection-refused/redis7-linux",
        "probability": 0.15,
        "condition": "when Redis crashes due to memory pressure and fails to restart"
      },
      {
        "error_id": "database/redis-readonly/redis7-linux",
        "probability": 0.1,
        "condition": "when OOM on a primary causes failover to a replica that becomes read-only"
      }
    ],
    "preceded_by": [
      {
        "error_id": "database/redis-connection-refused/redis7-linux",
        "probability": 0.1,
        "condition": "when Redis restarts after crash and rapidly fills memory again"
      }
    ],
    "frequently_confused_with": [
      {
        "error_id": "database/disk-full/pg16-linux",
        "distinction": "Redis OOM is an in-memory limit (maxmemory), while PostgreSQL disk full is a filesystem storage limit. Redis is memory-bound, PostgreSQL is disk-bound. Redis OOM is configurable and expected behavior with eviction policies."
      }
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 60,
    "last_verification": "2026-02-12"
  }
}
