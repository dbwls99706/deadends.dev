{
  "schema_version": "1.0.0",
  "id": "docker/no-space-left/docker24-macos",
  "url": "https://deadends.dev/docker/no-space-left/docker24-macos",
  "error": {
    "signature": "no space left on device",
    "regex": "no space left on device",
    "domain": "docker",
    "category": "storage",
    "first_seen": "2016-01-01",
    "last_confirmed": "2025-05-05"
  },
  "environment": {
    "runtime": {
      "name": "docker",
      "version_range": ">=20,<26"
    },
    "os": "macos",
    "additional": {
      "platform": "docker-desktop"
    }
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.88,
    "confidence": 0.88,
    "last_updated": "2025-05-05",
    "summary": "On macOS, Docker runs inside a lightweight Linux VM managed by Docker Desktop. 'no space left on device' means the VM's virtual disk image has reached its size limit or the host disk is full. This is different from native Linux because the storage is inside a VM disk image file (Docker.raw or Docker.qcow2), not directly on the filesystem."
  },
  "dead_ends": [
    {
      "action": "Running 'docker system prune' without --volumes",
      "why_fails": "Same as Linux: the default prune does not remove volumes, which are often the largest consumers of space. Additionally, on macOS, the VM disk image may not shrink even after pruning because the virtual disk does not automatically compact.",
      "fail_rate": 0.6,
      "sources": [],
      "common_misconception": "On macOS, even after a thorough prune, you may not see host disk space recovered because the VM's virtual disk file (~/Library/Containers/com.docker.docker/Data/vms/0/data/Docker.raw) does not automatically shrink."
    },
    {
      "action": "Deleting the Docker.raw file manually",
      "why_fails": "Deleting the VM disk image destroys all Docker data (images, containers, volumes) without recovery. Docker Desktop will recreate an empty disk on restart, but all data is permanently lost. This is equivalent to wiping the entire Docker installation.",
      "fail_rate": 0.2,
      "sources": []
    }
  ],
  "workarounds": [
    {
      "action": "Prune all unused Docker objects including volumes",
      "how": "docker system prune -a --volumes --force. Then restart Docker Desktop to trigger VM disk compaction. Check Docker Desktop > Settings > Resources to verify disk usage dropped.",
      "success_rate": 0.85,
      "tradeoff": "All unused volumes and images are removed; the Docker Desktop restart may take a minute",
      "sources": [
        "https://docs.docker.com/reference/cli/docker/system/prune/"
      ]
    },
    {
      "action": "Increase the Docker Desktop virtual disk size limit",
      "how": "Open Docker Desktop > Settings > Resources > Advanced. Increase 'Virtual disk limit' (default is typically 64GB). Click 'Apply & restart'. This expands the VM disk image to accommodate more Docker data.",
      "success_rate": 0.9,
      "tradeoff": "Consumes more host disk space; does not address the root cause of space accumulation. The virtual disk file grows but does not automatically shrink.",
      "condition": "Host disk has sufficient free space to allocate a larger VM disk",
      "sources": [
        "https://docs.docker.com/desktop/settings-and-maintenance/settings/#advanced"
      ]
    },
    {
      "action": "Reset Docker Desktop to factory defaults to reclaim disk space",
      "how": "Docker Desktop > Troubleshoot > Reset to factory defaults. This deletes the VM disk image and recreates it empty. Alternatively, Docker Desktop > Troubleshoot > Clean / Purge data. All images and containers will need to be re-pulled/rebuilt.",
      "success_rate": 0.95,
      "tradeoff": "Destroys all Docker data; all images, containers, volumes, and configurations are lost",
      "sources": []
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "docker/build-failed-disk/docker24-macos",
        "probability": 0.45,
        "condition": "Docker build operations fail mid-process when the VM disk is full",
        "typical_delay": "immediate"
      }
    ],
    "preceded_by": [],
    "frequently_confused_with": [
      {
        "error_id": "docker/no-space-left/docker24-linux",
        "distinction": "On macOS, the space issue is inside a VM disk image file, not the host filesystem directly. Pruning Docker objects may not free host disk space because the VM disk image does not auto-compact. On Linux, freed Docker space is immediately visible to the host filesystem."
      }
    ]
  },
  "metadata": {
    "generated_by": "deadend-seed-v1",
    "generation_date": "2025-06-01",
    "review_status": "auto_generated",
    "evidence_count": 34,
    "page_views": 0,
    "ai_agent_hits": 0,
    "human_hits": 0,
    "last_verification": "2025-06-01"
  }
}
