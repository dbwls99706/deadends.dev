{
  "schema_version": "1.0.0",
  "id": "git/refusing-to-merge-unrelated/git2.40-linux",
  "url": "https://deadends.dev/git/refusing-to-merge-unrelated/git2.40-linux",
  "error": {
    "signature": "fatal: refusing to merge unrelated histories",
    "regex": "fatal: refusing to merge unrelated histories",
    "domain": "git",
    "category": "merge",
    "first_seen": "2016-10-01",
    "last_confirmed": "2025-05-12"
  },
  "environment": {
    "runtime": {
      "name": "git",
      "version_range": ">=2.9,<3.0"
    },
    "os": "linux",
    "additional": {}
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.9,
    "confidence": 0.92,
    "last_updated": "2025-05-12",
    "summary": "This error was introduced in Git 2.9 as a safety measure. It occurs when merging or pulling two branches that do not share a common ancestor commit. The most common scenarios are: (1) a GitHub repo was created with a README and the local repo was initialized separately, (2) two unrelated repos are being merged, or (3) the repo history was rewritten with filter-branch or filter-repo."
  },
  "dead_ends": [
    {
      "action": "Trying 'git merge --force' (not a valid flag)",
      "why_fails": "Git merge does not have a --force flag. This is a common misconception from conflating 'git push --force' with merge. Running this command produces an error: 'error: unknown option `force`'. The correct flag is --allow-unrelated-histories.",
      "fail_rate": 1.0,
      "sources": [],
      "common_misconception": "Developers familiar with 'git push --force' assume a similar flag exists for merge. It does not. The --force flag is specific to push and a few other subcommands."
    },
    {
      "action": "Deleting the .git directory and reinitializing the repository",
      "why_fails": "Deleting .git destroys the entire local history, all branches, stashes, and configuration. After reinitializing, the local repo has no history at all and attempting to pull from the remote will face the same 'unrelated histories' error because the new empty repo still has no common ancestor with the remote.",
      "fail_rate": 0.95,
      "sources": []
    }
  ],
  "workarounds": [
    {
      "action": "Use --allow-unrelated-histories flag on merge or pull",
      "how": "git pull origin main --allow-unrelated-histories. Or: git merge <branch> --allow-unrelated-histories. This tells Git to allow the merge even though the two histories have no common ancestor. You may need to resolve merge conflicts if both histories modified the same files.",
      "success_rate": 0.95,
      "tradeoff": "Creates a merge commit joining two unrelated histories. The resulting history graph has two root commits, which can be confusing. This is safe and intentional for the 'GitHub repo with README + local repo' scenario.",
      "sources": [
        "https://git-scm.com/docs/git-merge#Documentation/git-merge.txt---allow-unrelated-histories"
      ]
    },
    {
      "action": "Understand why histories diverged before merging",
      "how": "Run 'git log --oneline --all --graph' to visualize both histories. If you created a GitHub repo with a README/LICENSE and then ran 'git init' locally without cloning, the two repos have independent root commits. If the divergence was caused by filter-branch or BFG Repo Cleaner, the rewritten history created new commit hashes.",
      "success_rate": 0.85,
      "tradeoff": "Requires understanding of Git history; no direct fix, but guides the correct approach",
      "sources": []
    },
    {
      "action": "Clone the remote and copy local files instead of merging",
      "how": "If the local repo is new with few commits, the simplest approach is: clone the remote ('git clone <url>'), copy your local files into the cloned directory, and commit them. This avoids the unrelated histories entirely.",
      "success_rate": 0.9,
      "tradeoff": "Loses local commit history (suitable only when local history is minimal or unimportant)",
      "condition": "The local repository has very few commits and preserving its history is not important",
      "sources": []
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "git/merge-conflict/git2.40-linux",
        "probability": 0.5,
        "condition": "After --allow-unrelated-histories, both histories may have files with the same path (e.g., README.md) causing merge conflicts",
        "typical_delay": "immediate"
      }
    ],
    "preceded_by": [
      {
        "error_id": "git/remote-add-origin/git2.40-linux",
        "probability": 0.55,
        "condition": "Developer created a local repo with 'git init', added a remote that was independently initialized on GitHub"
      }
    ],
    "frequently_confused_with": [
      {
        "error_id": "git/divergent-branches/git2.40-linux",
        "distinction": "'refusing to merge unrelated histories' means no common ancestor exists at all (independent root commits). 'divergent branches' (since Git 2.27) means branches share history but have diverged (both have new commits). The former requires --allow-unrelated-histories; the latter requires choosing a merge strategy (merge, rebase, or fast-forward-only)."
      }
    ]
  },
  "metadata": {
    "generated_by": "deadend-seed-v1",
    "generation_date": "2025-06-01",
    "review_status": "auto_generated",
    "evidence_count": 58,
    "page_views": 0,
    "ai_agent_hits": 0,
    "human_hits": 0,
    "last_verification": "2025-06-01"
  }
}
