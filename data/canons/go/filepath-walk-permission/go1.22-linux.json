{
  "schema_version": "1.0.0",
  "id": "go/filepath-walk-permission/go1.22-linux",
  "url": "https://deadends.dev/go/filepath-walk-permission/go1.22-linux",
  "error": {
    "signature": "filepath.Walk: open /root/.cache: permission denied",
    "regex": "filepath\\.(Walk|WalkDir):.*permission denied|open.*permission denied",
    "domain": "go",
    "category": "filesystem_error",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {
      "name": "go",
      "version_range": ">=1.22,<2.0"
    },
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.88,
    "confidence": 0.9,
    "last_updated": "2026-02-12",
    "summary": "filepath.Walk or filepath.WalkDir encounters a directory or file that the process does not have read permission for. Walk stops and returns the error by default."
  },
  "dead_ends": [
    {
      "action": "Run the program as root to bypass permission checks",
      "why_fails": "Running as root is a security risk and masks the real issue â€” the program should handle permission errors gracefully",
      "fail_rate": 0.7,
      "sources": [
        "https://go.dev/doc/articles/race_detector"
      ],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Use filepath.WalkDir with error handling to skip inaccessible directories",
      "success_rate": 0.92,
      "how": "filepath.WalkDir(root, func(path string, d fs.DirEntry, err error) error {\n    if err != nil {\n        return filepath.SkipDir  // skip inaccessible directories\n    }\n    // process path\n    return nil\n})",
      "sources": [
        "https://pkg.go.dev/path/filepath#WalkDir"
      ],
      "condition": ""
    },
    {
      "action": "Check permissions before walking with os.Stat",
      "success_rate": 0.85,
      "how": "info, err := os.Stat(dir)\nif err != nil || info.Mode().Perm()&0444 == 0 {\n    // skip or handle\n}",
      "sources": [
        "https://pkg.go.dev/os#Stat"
      ],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "go/too-many-open-files/go1-linux",
        "probability": 0.15,
        "condition": "when walking large directory trees without closing file handles"
      }
    ],
    "preceded_by": [
      {
        "error_id": "go/os-exec-not-found/go1.22-linux",
        "probability": 0.1,
        "condition": "when searching for executables by walking directories"
      }
    ],
    "frequently_confused_with": [
      {
        "error_id": "go/os-exec-not-found/go1.22-linux",
        "distinction": "'permission denied' means the file/directory exists but cannot be read, while 'not found in $PATH' means the file does not exist in any searched location."
      }
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 50,
    "last_verification": "2026-02-12"
  }
}
