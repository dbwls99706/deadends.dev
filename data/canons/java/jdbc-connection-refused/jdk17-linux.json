{
  "schema_version": "1.0.0",
  "id": "java/jdbc-connection-refused/jdk17-linux",
  "url": "https://deadends.dev/java/jdbc-connection-refused/jdk17-linux",
  "error": {
    "signature": "java.sql.SQLException: Connection refused",
    "regex": "(?:java\\.sql\\.SQLException|java\\.net\\.ConnectException).*(?:Connection refused|Communications link failure)",
    "domain": "java",
    "category": "runtime_error",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {
      "name": "java",
      "version_range": ">=17,<21"
    },
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.85,
    "confidence": 0.88,
    "last_updated": "2026-02-12",
    "summary": "JDBC Connection refused occurs when the Java application cannot establish a TCP connection to the database server. The database may not be running, the host/port may be wrong, firewall rules may block the connection, or the JDBC URL may be malformed."
  },
  "dead_ends": [
    {
      "action": "Increasing connection timeout to wait longer for the database to respond",
      "why_fails": "If the connection is refused (TCP RST or no route), the failure is immediate â€” the database is not listening on that host:port. Increasing timeout only helps with slow responses, not with refused connections. A 'Connection refused' means the port is not open, and no amount of waiting will change that.",
      "fail_rate": 0.85,
      "sources": [
        "https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/package-summary.html"
      ],
      "condition": ""
    },
    {
      "action": "Switching JDBC drivers without verifying the database is actually reachable",
      "why_fails": "Connection refused is a network-level error, not a driver issue. Switching from MySQL Connector/J to MariaDB Connector or from PostgreSQL JDBC to pgjdbc-ng will not help if the database server is not running or the network path is blocked.",
      "fail_rate": 0.9,
      "sources": [
        "https://docs.oracle.com/en/java/javase/21/docs/api/java.sql/java/sql/package-summary.html"
      ],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Verify the database server is running and accessible on the expected host:port",
      "success_rate": 0.9,
      "how": "1. Check if the database process is running: 'systemctl status postgresql' or 'docker ps' for containerized databases. 2. Verify the port is open: 'ss -tlnp | grep 5432' (or your database port). 3. Test TCP connectivity from the application host: 'nc -zv db-host 5432'. 4. Check firewall rules: 'iptables -L' or cloud security group settings. 5. For Docker: ensure the database container is on the same network and the port is exposed.",
      "sources": [],
      "condition": ""
    },
    {
      "action": "Validate the JDBC URL format and connection properties against the database driver documentation",
      "success_rate": 0.85,
      "how": "1. Verify JDBC URL format: jdbc:postgresql://hostname:5432/dbname (PostgreSQL), jdbc:mysql://hostname:3306/dbname (MySQL). 2. Check for typos in hostname, port, and database name. 3. For Docker Compose: use the service name as hostname, not 'localhost'. 4. For Spring Boot: verify spring.datasource.url, spring.datasource.username, spring.datasource.password in application.properties. 5. Ensure the JDBC driver JAR is on the classpath (add the dependency to pom.xml/build.gradle).",
      "sources": [],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "java/hibernate-lazy-init/jdk17-linux",
        "probability": 0.1,
        "condition": "when connection pool exhaustion causes Hibernate session to lose its connection"
      },
      {
        "error_id": "java/illegalstateexception/jdk17-linux",
        "probability": 0.15,
        "condition": "when connection failure leaves transaction manager in an inconsistent state"
      }
    ],
    "preceded_by": [
      {
        "error_id": "java/spring-autowire-failed/spring6-linux",
        "probability": 0.15,
        "condition": "when DataSource bean creation fails due to unresolvable database connection"
      },
      {
        "error_id": "java/classnotfoundexception/jdk17-linux",
        "probability": 0.1,
        "condition": "when JDBC driver class is missing from classpath"
      }
    ],
    "frequently_confused_with": [
      {
        "error_id": "java/ssl-handshake-exception/jdk17-linux",
        "distinction": "Connection refused means the TCP connection itself failed (port not open); SSLHandshakeException means TCP connection succeeded but the TLS negotiation failed (certificate issues)"
      }
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 90,
    "last_verification": "2026-02-12"
  }
}
