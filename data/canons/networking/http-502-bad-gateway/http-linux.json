{
  "schema_version": "1.0.0",
  "id": "networking/http-502-bad-gateway/http-linux",
  "url": "https://deadends.dev/networking/http-502-bad-gateway/http-linux",
  "error": {
    "signature": "HTTP 502 Bad Gateway",
    "regex": "502 Bad Gateway|HTTP.*502|BadGateway|upstream.*invalid.*response",
    "domain": "networking",
    "category": "http",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {
      "name": "http",
      "version_range": "HTTP/1.1+"
    },
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.85,
    "confidence": 0.87,
    "last_updated": "2026-02-12",
    "summary": "A reverse proxy, load balancer, or API gateway received an invalid or no response from the upstream (backend) server. The proxy is working correctly; the backend it forwards to is the source of the problem."
  },
  "dead_ends": [
    {
      "action": "Restart the reverse proxy or load balancer without checking the backend",
      "why_fails": "The proxy is functioning correctly -- it is faithfully reporting that the backend is broken. Restarting the proxy (nginx, HAProxy, etc.) does not fix the upstream application server that is returning invalid responses or not responding at all.",
      "fail_rate": 0.85,
      "sources": [
        "https://man7.org/linux/man-pages/man1/curl.1.html"
      ],
      "condition": ""
    },
    {
      "action": "Increase proxy timeout settings as the sole fix",
      "why_fails": "While timeouts can cause 502 errors, blindly increasing them just delays the error response and wastes client and proxy resources. If the backend is crashed or returning malformed responses, no amount of waiting will produce a valid response.",
      "fail_rate": 0.7,
      "sources": [
        "https://man7.org/linux/man-pages/man1/curl.1.html"
      ],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Diagnose and fix the upstream backend server",
      "success_rate": 0.88,
      "how": "1. Check backend service status: systemctl status backend-app\n2. Test backend directly (bypass proxy): curl http://localhost:backend-port/health\n3. Check backend logs for errors: journalctl -u backend-app --no-pager -n 100\n4. Verify backend has not run out of memory or file descriptors: top, ulimit -n\n5. Restart the backend if it crashed: systemctl restart backend-app\n6. Check if backend is returning malformed HTTP responses (e.g., headers too large)",
      "sources": [],
      "condition": ""
    },
    {
      "action": "Verify and fix the proxy upstream configuration",
      "success_rate": 0.85,
      "how": "1. Check proxy error logs: tail -f /var/log/nginx/error.log\n2. Verify upstream address is correct in nginx config: check proxy_pass directive\n3. Ensure the upstream host:port is reachable from the proxy: nc -zv backend-host backend-port\n4. Check proxy buffer sizes if errors mention 'upstream sent too big header': proxy_buffer_size 16k;\n5. If using Unix sockets, verify socket file exists and has correct permissions\n6. For multiple backends, check if health checks are removing failed nodes",
      "sources": [],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "networking/http-503-service-unavailable/http-linux",
        "probability": 0.25,
        "condition": "when the backend server is completely down and the proxy marks it as unavailable"
      },
      {
        "error_id": "networking/http-504-gateway-timeout/http-linux",
        "probability": 0.2,
        "condition": "when the backend becomes slow instead of returning invalid responses"
      }
    ],
    "preceded_by": [
      {
        "error_id": "networking/connection-refused/tcp-linux",
        "probability": 0.2,
        "condition": "when the proxy cannot connect to the backend at all"
      },
      {
        "error_id": "networking/connection-reset/tcp-linux",
        "probability": 0.15,
        "condition": "when the backend drops the connection mid-response"
      }
    ],
    "frequently_confused_with": [
      {
        "error_id": "networking/http-503-service-unavailable/http-linux",
        "distinction": "502 means the proxy received an invalid response from the backend; 503 means the proxy knows the backend is unavailable and does not even attempt to forward the request"
      },
      {
        "error_id": "networking/http-504-gateway-timeout/http-linux",
        "distinction": "502 means the backend responded but with an invalid response; 504 means the backend did not respond at all within the timeout period"
      }
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 65,
    "last_verification": "2026-02-12"
  }
}
