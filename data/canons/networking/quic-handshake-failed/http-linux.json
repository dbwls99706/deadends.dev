{
  "schema_version": "1.0.0",
  "id": "networking/quic-handshake-failed/http-linux",
  "url": "https://deadends.dev/networking/quic-handshake-failed/http-linux",
  "error": {
    "signature": "QUIC handshake failed: TLS alert handshake_failure; connection refused on UDP 443",
    "regex": "QUIC.*handshake.*fail|HTTP/3.*fail|h3.*connection.*error|QUIC.*TLS.*alert|Alt-Svc.*QUIC.*fail",
    "domain": "networking",
    "category": "quic",
    "first_seen": "2023-06-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {"name": "http3", "version_range": "any"},
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.85,
    "confidence": 0.87,
    "last_updated": "2026-02-12",
    "summary": "The QUIC (HTTP/3) handshake failed, typically because UDP 443 is blocked by a firewall or middlebox, the server does not support QUIC, or TLS 1.3 negotiation failed. Browsers and clients should fall back to HTTP/2 over TCP, but programmatic clients may not have automatic fallback."
  },
  "dead_ends": [
    {
      "action": "Force QUIC/HTTP/3 without fallback in environments that block UDP",
      "why_fails": "Many enterprise networks, corporate firewalls, and some ISPs block or throttle UDP traffic on port 443. Without TCP fallback, the connection fails entirely. QUIC requires UDP to function.",
      "fail_rate": 0.85,
      "sources": [],
      "condition": "In networks that filter UDP"
    },
    {
      "action": "Disable TLS certificate verification to bypass QUIC TLS errors",
      "why_fails": "QUIC mandates TLS 1.3 and does not support unencrypted connections. Disabling verification does not fix handshake failures caused by unsupported cipher suites, protocol version mismatches, or certificate chain issues.",
      "fail_rate": 0.80,
      "sources": [],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Ensure UDP 443 is open in all firewalls along the path",
      "success_rate": 0.88,
      "how": "1. Test UDP 443 connectivity: nc -zuv host 443\n2. Check local firewall: iptables -L -n | grep 443\n3. Allow UDP 443: iptables -A INPUT -p udp --dport 443 -j ACCEPT\n4. In cloud environments, check security groups allow UDP 443 inbound and outbound\n5. Check for middleboxes that inspect or block UDP: traceroute -U -p 443 host\n6. Verify QUIC works: curl --http3 -v https://host/",
      "sources": [],
      "condition": ""
    },
    {
      "action": "Configure automatic fallback from HTTP/3 to HTTP/2 over TCP",
      "success_rate": 0.92,
      "how": "1. In curl: --http3 falls back automatically; use --http3-only to force (avoid this)\n2. In browsers, QUIC fallback is automatic via Alt-Svc header racing\n3. In programmatic clients, implement Alt-Svc parsing and fallback logic\n4. On the server, ensure both HTTP/2 (TCP) and HTTP/3 (UDP) are configured\n5. Set Alt-Svc header: Alt-Svc: h3=\":443\"; ma=86400\n6. Clients that fail QUIC will use the TCP connection transparently",
      "sources": [],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {"error_id": "networking/connection-timeout/tcp-linux", "probability": 0.20, "condition": "when no TCP fallback is configured and the QUIC handshake times out waiting for a response"},
      {"error_id": "networking/ssl-protocol-error/openssl3-linux", "probability": 0.15, "condition": "when TLS 1.3 negotiation within QUIC fails due to cipher mismatch"}
    ],
    "preceded_by": [
      {"error_id": "networking/firewall-blocked/tcp-linux", "probability": 0.25, "condition": "when a firewall blocks UDP 443 but allows TCP 443"}
    ],
    "frequently_confused_with": [
      {"error_id": "networking/ssl-protocol-error/openssl3-linux", "distinction": "QUIC handshake failure involves the entire QUIC+TLS 1.3 stack over UDP; SSL protocol error is a traditional TLS-over-TCP issue"}
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 35,
    "last_verification": "2026-02-12"
  }
}
