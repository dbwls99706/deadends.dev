{
  "schema_version": "1.0.0",
  "id": "python/pydantic-v2-field-validation-error/py311-linux",
  "url": "https://deadends.dev/python/pydantic-v2-field-validation-error/py311-linux",
  "error": {
    "signature": "PydanticUserError: A non-annotated attribute was detected. All model fields require a type annotation.",
    "regex": "PydanticUserError:.*(?:non-annotated attribute|Field.*overridden|validators should be used with fields)",
    "domain": "python",
    "category": "migration_error",
    "first_seen": "2023-06-01",
    "last_confirmed": "2026-02-01"
  },
  "environment": {
    "runtime": {
      "name": "cpython",
      "version_range": ">=3.11,<3.13"
    },
    "os": "linux",
    "python": ">=3.11,<3.13",
    "additional": {
      "common_contexts": [
        "pydantic v2",
        "fastapi",
        "sqlmodel",
        "migration"
      ]
    }
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.88,
    "confidence": 0.9,
    "last_updated": "2026-02-01",
    "summary": "Pydantic v1 to v2 migration error. Class-level attributes, Config inner class, and @validator decorators must be updated to v2 syntax. The bump-pydantic tool can automate ~80% of the migration."
  },
  "dead_ends": [
    {
      "action": "Pinning pydantic<2 in requirements",
      "why_fails": "This blocks FastAPI >=0.100, SQLModel, and all new pydantic-dependent libraries. It creates cascading dependency conflicts and technical debt. Pydantic v1 is no longer maintained.",
      "fail_rate": 0.75,
      "sources": [],
      "common_misconception": "Version pinning is a permanent solution when it is a temporary bandaid that delays migration."
    },
    {
      "action": "Adding class Config: orm_mode = True",
      "why_fails": "In Pydantic v2, orm_mode was renamed to from_attributes in model_config. The old class Config with orm_mode is silently ignored â€” your model loses ORM support without any error or warning.",
      "fail_rate": 0.88,
      "sources": [],
      "common_misconception": "Developers assume Pydantic v2 raises errors for invalid Config options. It silently ignores them."
    },
    {
      "action": "Using @validator decorator from pydantic v1",
      "why_fails": "@validator is importable in v2 for backward compatibility but produces subtly different behavior. It does not support mode='before'/'after' and has different argument order. Use @field_validator instead.",
      "fail_rate": 0.7,
      "sources": [],
      "common_misconception": "@validator working at import time is taken as proof it works correctly, when it may silently produce wrong results."
    }
  ],
  "workarounds": [
    {
      "action": "Run bump-pydantic to auto-migrate models",
      "how": "pip install bump-pydantic && bump-pydantic . This tool handles ~80% of the migration automatically: renames Config to model_config dict, @validator to @field_validator, orm_mode to from_attributes, and more.",
      "success_rate": 0.85,
      "tradeoff": "May need manual review for complex custom validators",
      "sources": [
        "https://docs.pydantic.dev/latest/migration/"
      ]
    },
    {
      "action": "Replace class Config with model_config = ConfigDict(...)",
      "how": "Change 'class Config: orm_mode = True' to 'model_config = ConfigDict(from_attributes=True)'. Import ConfigDict from pydantic. This is a class-level variable, not an inner class.",
      "success_rate": 0.92,
      "tradeoff": "None; this is the correct v2 pattern",
      "sources": [
        "https://docs.pydantic.dev/latest/concepts/config/"
      ]
    },
    {
      "action": "Update validators from @validator to @field_validator",
      "how": "Change @validator('field_name') to @field_validator('field_name') with mode='before' or mode='after'. The new validators receive FieldValidationInfo instead of cls as the first argument after self.",
      "success_rate": 0.88,
      "tradeoff": "Requires updating all custom validators in the codebase",
      "sources": [
        "https://docs.pydantic.dev/latest/concepts/validators/"
      ]
    }
  ],
  "transition_graph": {
    "leads_to": [
      {
        "error_id": "python/fastapi-422-validation-error/py311-linux",
        "probability": 0.3,
        "condition": "After partial migration, validators may silently stop working, causing unexpected 422 errors from FastAPI"
      }
    ],
    "preceded_by": [],
    "frequently_confused_with": [
      {
        "error_id": "python/pydantic-validation-error/py311-linux",
        "distinction": "PydanticUserError occurs at class definition time (import) due to v2 migration issues. PydanticValidationError occurs at runtime when data fails to validate against a correctly defined model."
      }
    ]
  },
  "metadata": {
    "generated_by": "manual",
    "generation_date": "2026-02-14",
    "review_status": "human_reviewed",
    "evidence_count": 60,
    "page_views": 0,
    "ai_agent_hits": 0,
    "human_hits": 0,
    "last_verification": "2026-02-14"
  }
}