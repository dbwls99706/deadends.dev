{
  "schema_version": "1.0.0",
  "id": "rust/rust-io-broken-pipe/rust1.77-linux",
  "url": "https://deadends.dev/rust/rust-io-broken-pipe/rust1.77-linux",
  "error": {
    "signature": "Error: Os { code: 32, kind: BrokenPipe, message: \"Broken pipe\" }",
    "regex": "BrokenPipe|Broken pipe|os error 32",
    "domain": "rust",
    "category": "io_error",
    "first_seen": "2023-01-01",
    "last_confirmed": "2026-02-12"
  },
  "environment": {
    "runtime": {"name": "rust", "version_range": ">=1.70,<2.0"},
    "os": "linux"
  },
  "verdict": {
    "resolvable": "true",
    "fix_success_rate": 0.87,
    "confidence": 0.89,
    "last_updated": "2026-02-12",
    "summary": "The read end of a pipe or socket was closed while the program tried to write. Common with piped stdout (e.g., program | head)."
  },
  "dead_ends": [
    {
      "action": "Ignore SIGPIPE signal globally",
      "why_fails": "Rust already ignores SIGPIPE by default; the issue is not handling the resulting io::Error",
      "fail_rate": 0.70,
      "sources": [],
      "condition": ""
    }
  ],
  "workarounds": [
    {
      "action": "Handle BrokenPipe errors gracefully in write operations",
      "success_rate": 0.90,
      "how": "use std::io::{self, Write};\nif let Err(e) = writeln!(stdout, \"{}\", data) {\n    if e.kind() == io::ErrorKind::BrokenPipe {\n        std::process::exit(0); // Normal exit for piped commands\n    }\n    return Err(e.into());\n}",
      "sources": ["https://doc.rust-lang.org/std/io/enum.ErrorKind.html"],
      "condition": ""
    },
    {
      "action": "Use BufWriter with explicit error handling for stdout",
      "success_rate": 0.85,
      "how": "let stdout = io::stdout();\nlet mut writer = io::BufWriter::new(stdout.lock());\n// Flush and handle BrokenPipe at the end",
      "sources": ["https://doc.rust-lang.org/std/io/struct.BufWriter.html"],
      "condition": ""
    }
  ],
  "transition_graph": {
    "leads_to": [
      {"error_id": "rust/rust-hyper-connection-reset/rust1.77-linux", "probability": 0.15, "condition": "When broken pipe in network context manifests as connection reset"}
    ],
    "preceded_by": [
      {"error_id": "rust/rust-channel-recv-disconnected/rust1.77-linux", "probability": 0.10, "condition": "When channel disconnection leads to pipe write failures"}
    ],
    "frequently_confused_with": [
      {"error_id": "rust/rust-channel-recv-disconnected/rust1.77-linux", "distinction": "BrokenPipe is OS-level pipe I/O error; channel disconnect is Rust's in-process mpsc channel error"}
    ]
  },
  "metadata": {
    "generated_by": "bulk_generate.py",
    "generation_date": "2026-02-12",
    "review_status": "auto_generated",
    "evidence_count": 50,
    "last_verification": "2026-02-12"
  }
}
